
@using CaptchaMvc.HtmlHelpers

@model Eshop.ViewModels.LoginViewModel


@{
    ViewBag.Title = "ورود به سایت";
}

@if (User.Identity.IsAuthenticated && Request.QueryString["ReturnUrl"] != null)
{


    <hr />
    <div class="alert alert-danger">
        <p>شما مجوز دسترسی به بخش مورد نظر را ندارید.</p>
        @Html.ActionLink("بازگشت به صفحه اصلی", "Index", "Home")
    </div>
}
else
{


    @*<h2>ورود کاربران</h2>
    using (Html.BeginForm("Login", "Account", FormMethod.Post))
    {
        @Html.AntiForgeryToken()

        <div class="form-horizontal">
            <hr />

            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="form-group">
                @Html.LabelFor(model => model.Email, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Email, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.Email, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Password, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Password, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.Password, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.RememberMe, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    <div class="checkbox">
                        @Html.EditorFor(model => model.RememberMe)
                        @Html.ValidationMessageFor(model => model.RememberMe, "", new { @class = "text-danger" })
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="ورود" class="btn btn-primary" />
                </div>
            </div>
        </div>
    }*@


    if (Request.QueryString["recover"] != null)
    {
        <hr/>
        <div class="alert alert-success">
            <p>کلمه عبور با موفقیت بازیابی شد.</p>
        </div>
    }

    <div class="col-md-9 col-sm-8 left-side-content internal-style">

        <section class="border-radius">
            <header><h3> ورود به سایت </h3></header>
            <article>
                <div class="col-md-10 col-sm-10 col-xs-12">

                    <form method="post" action=@Url.Action("Login", "Account")>
                        @Html.AntiForgeryToken()
                        @*<div class="form-group">
            <input type="text" class="form-control" placeholder="نام کاربری " name ="UserName">
        </div>*@
                        <div class="form-group">
                            <input type="email" class="form-control" placeholder=" ایمیل " name="Email">
                            @Html.ValidationMessageFor(model => model.Email, "", new { @class = "text-danger" })
                        </div>
                        <div class="form-group">
                            <input type="password" class="form-control" placeholder="رمز عبور" name="Password">
                            @Html.ValidationMessageFor(model => model.Password, "", new { @class = "text-danger" })
                        </div>
                        <p><a href="/ForgotPassword"><i class="fa fa-lock"></i>رمز عبور خود را فراموش کرده ام !</a></p>
                        <p><a href="/Register"><i class="fa fa-user-plus"></i>ثبت نام کنید!</a></p>
                        <label><input type="checkbox" name="RememberMe" value="True"> مرا به یاد بسپار  </label>
                        @Html.ValidationMessageFor(model => model.RememberMe, "", new { @class = "text-danger" })
                        @*<div class="form-group">
                            @Html.LabelFor(model => model.RememberMe, htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                <div class="checkbox">
                                    @Html.EditorFor(model => model.RememberMe)
                                    @Html.ValidationMessageFor(model => model.RememberMe, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>*@
                     

                        @Html.MathCaptcha("", "پاسخ صحیح را وارد کنید")
                        @if (ViewBag.Error != null)
                        {
                            <div class="alert alert-danger">
                                <p>
                                    @ViewBag.Error
                                </p>
                            </div>
                        
                        }
                        
                        <input type="submit" value=" ورود به سایت">
                    </form>

                </div>
                <div class="clearfix"></div>
            </article>
        </section>
                
    </div>

 

}


